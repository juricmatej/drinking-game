<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#667eea">
    <title>ClubQuest - Night Challenges</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="screen active">
        <div class="container">
            <div class="login-box">
                <div class="logo-container">
                    <i class="fas fa-champagne-glasses logo-icon"></i>
                    <h1>ClubQuest</h1>
                </div>
                <p class="tagline">Turn your night into an adventure</p>
                <div class="login-form">
                    <div class="input-group">
                        <i class="fas fa-user"></i>
                        <input type="text" id="usernameInput" placeholder="Username">
                    </div>
                    <button onclick="login()" class="btn-primary">
                        <i class="fas fa-sign-in-alt"></i> Enter
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Menu -->
    <div id="mainMenu" class="screen">
        <div class="header">
            <div class="header-brand">
                <i class="fas fa-champagne-glasses"></i>
                <h2>ClubQuest</h2>
            </div>
            <div class="user-info">
                <span id="currentUser" class="username-display">
                    <i class="fas fa-user-circle"></i>
                    <span id="usernameText"></span>
                </span>
                <button onclick="showScreen('profileScreen')" class="btn-icon">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
        </div>
        <div class="container">
            <div class="welcome-banner">
                <h3>Welcome back! ðŸ‘‹</h3>
                <p>Choose an option to get started</p>
            </div>
            <div class="menu-grid">
                <div class="menu-card" onclick="showScreen('sessionScreen')">
                    <div class="icon-wrapper purple">
                        <i class="fas fa-bullseye fa-3x"></i>
                    </div>
                    <h3>Join the Night</h3>
                    <p>Enter an active session and start challenges</p>
                    <div class="card-footer">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                </div>
                <div class="menu-card" onclick="showScreen('groupsScreen')">
                    <div class="icon-wrapper blue">
                        <i class="fas fa-users fa-3x"></i>
                    </div>
                    <h3>Groups</h3>
                    <p>Create or join a group</p>
                    <div class="card-footer">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                </div>
                <div class="menu-card" onclick="showScreen('friendsScreen')">
                    <div class="icon-wrapper green">
                        <i class="fas fa-user-friends fa-3x"></i>
                    </div>
                    <h3>Friends</h3>
                    <p>Manage friends and invitations</p>
                    <div class="card-footer">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                </div>
                <div class="menu-card" onclick="showScreen('leaderboardScreen')">
                    <div class="icon-wrapper gold">
                        <i class="fas fa-trophy fa-3x"></i>
                    </div>
                    <h3>Leaderboard</h3>
                    <p>Check the top players</p>
                    <div class="card-footer">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Session Screen -->
    <div id="sessionScreen" class="screen">
        <div class="header">
            <button onclick="showScreen('mainMenu')" class="btn-back">
                <i class="fas fa-arrow-left"></i> Back
            </button>
            <h2><i class="fas fa-calendar-alt"></i> Active Sessions</h2>
        </div>
        <div class="container">
            <div id="sessionsList" class="sessions-list"></div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="screen">
        <div class="header">
            <button onclick="showScreen('sessionScreen')" class="btn-back">
                <i class="fas fa-times"></i> Leave
            </button>
            <h2 id="sessionName"></h2>
            <div class="points">
                <i class="fas fa-star"></i>
                <span id="userPoints">0</span>
            </div>
        </div>
        <div class="container">
            <div class="tabs">
                <button class="tab active" onclick="switchTab('challenges')">
                    <i class="fas fa-tasks"></i> Challenges
                </button>
                <button class="tab" onclick="switchTab('live-leaderboard')">
                    <i class="fas fa-trophy"></i> Leaderboard
                </button>
            </div>

            <div id="challengesTab" class="tab-content active">
                <div class="section-header">
                    <h3><i class="fas fa-clipboard-list"></i> Your Challenges</h3>
                </div>
                <div id="challengesList" class="challenges-list"></div>
            </div>

            <div id="liveLeaderboardTab" class="tab-content">
                <div class="section-header">
                    <h3><i class="fas fa-medal"></i> Current Leaderboard</h3>
                </div>
                <div id="liveLeaderboard" class="leaderboard"></div>
            </div>
        </div>
    </div>

    <!-- Groups Screen -->
    <div id="groupsScreen" class="screen">
        <div class="header">
            <button onclick="showScreen('mainMenu')" class="btn-back">
                <i class="fas fa-arrow-left"></i> Back
            </button>
            <h2><i class="fas fa-users"></i> Groups</h2>
        </div>
        <div class="container">
            <div class="tabs">
                <button class="tab active" onclick="switchGroupTab('my-groups')">
                    <i class="fas fa-user-shield"></i> My Groups
                </button>
                <button class="tab" onclick="switchGroupTab('search-groups')">
                    <i class="fas fa-search"></i> Search
                </button>
                <button class="tab" onclick="switchGroupTab('requests')">
                    <i class="fas fa-inbox"></i> Requests
                </button>
            </div>

            <div id="myGroupsTab" class="tab-content active">
                <button onclick="showCreateGroupModal()" class="btn-primary btn-full">
                    <i class="fas fa-plus-circle"></i> Create New Group
                </button>
                <div id="myGroupsList" class="groups-list"></div>
            </div>

            <div id="searchGroupsTab" class="tab-content">
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="groupSearchInput" placeholder="Search groups...">
                    <button onclick="searchGroups()" class="btn-primary">
                        <i class="fas fa-search"></i> Search
                    </button>
                </div>
                <div id="searchResults" class="groups-list"></div>
            </div>

            <div id="requestsTab" class="tab-content">
                <div class="section-header">
                    <h3><i class="fas fa-bell"></i> Join Requests</h3>
                </div>
                <div id="groupRequestsList" class="requests-list"></div>
            </div>
        </div>
    </div>

    <!-- Group Detail Screen -->
    <div id="groupDetailScreen" class="screen">
        <div class="header">
            <button onclick="showScreen('groupsScreen')" class="btn-back">
                <i class="fas fa-arrow-left"></i> Back
            </button>
            <h2 id="groupDetailName"></h2>
        </div>
        <div class="container">
            <div class="group-info">
                <div class="info-row">
                    <i class="fas fa-crown"></i>
                    <strong>Owner:</strong> <span id="groupOwner"></span>
                </div>
                <div class="info-row">
                    <i class="fas fa-users"></i>
                    <strong>Members:</strong> <span id="groupMemberCount"></span>
                </div>
                <div class="info-row">
                    <i class="fas fa-align-left"></i>
                    <strong>Description:</strong> <span id="groupDescription"></span>
                </div>
            </div>

            <div class="section-header">
                <h3><i class="fas fa-user-friends"></i> Group Members</h3>
            </div>
            <div id="groupMembersList" class="members-list"></div>

            <div id="groupAdminActions" class="admin-actions" style="display:none;">
                <h3><i class="fas fa-tools"></i> Owner Actions</h3>
                <button onclick="inviteFriendsToGroup()" class="btn-secondary">
                    <i class="fas fa-user-plus"></i> Invite Friends
                </button>
            </div>
        </div>
    </div>

    <!-- Friends Screen -->
    <div id="friendsScreen" class="screen">
        <div class="header">
            <button onclick="showScreen('mainMenu')" class="btn-back">
                <i class="fas fa-arrow-left"></i> Back
            </button>
            <h2><i class="fas fa-user-friends"></i> Friends</h2>
        </div>
        <div class="container">
            <div class="tabs">
                <button class="tab active" onclick="switchFriendTab('friends-list')">
                    <i class="fas fa-heart"></i> Friends
                </button>
                <button class="tab" onclick="switchFriendTab('friend-requests')">
                    <i class="fas fa-inbox"></i> Requests
                </button>
                <button class="tab" onclick="switchFriendTab('find-friends')">
                    <i class="fas fa-search"></i> Find
                </button>
            </div>

            <div id="friendsListTab" class="tab-content active">
                <div id="friendsList" class="friends-list"></div>
            </div>

            <div id="friendRequestsTab" class="tab-content">
                <div class="section-header">
                    <h3><i class="fas fa-envelope"></i> Received Requests</h3>
                </div>
                <div id="friendRequestsList" class="requests-list"></div>
                <div class="section-header">
                    <h3><i class="fas fa-paper-plane"></i> Sent Requests</h3>
                </div>
                <div id="sentRequestsList" class="requests-list"></div>
            </div>

            <div id="findFriendsTab" class="tab-content">
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="friendSearchInput" placeholder="Search users...">
                    <button onclick="searchUsers()" class="btn-primary">
                        <i class="fas fa-search"></i> Search
                    </button>
                </div>
                <div id="userSearchResults" class="users-list"></div>
            </div>
        </div>
    </div>

    <!-- Leaderboard Screen -->
    <div id="leaderboardScreen" class="screen">
        <div class="header">
            <button onclick="showScreen('mainMenu')" class="btn-back">
                <i class="fas fa-arrow-left"></i> Back
            </button>
            <h2><i class="fas fa-trophy"></i> Top Players</h2>
        </div>
        <div class="container">
            <div class="section-header">
                <h3><i class="fas fa-medal"></i> Global Leaderboard</h3>
            </div>
            <div id="globalLeaderboard" class="leaderboard"></div>
        </div>
    </div>

    <!-- Profile Screen -->
    <div id="profileScreen" class="screen">
        <div class="header">
            <button onclick="showScreen('mainMenu')" class="btn-back">
                <i class="fas fa-arrow-left"></i> Back
            </button>
            <h2><i class="fas fa-user"></i> Profile</h2>
        </div>
        <div class="container">
            <div class="profile-info">
                <div class="profile-avatar">
                    <i class="fas fa-user-circle"></i>
                </div>
                <h3 id="profileUsername"></h3>
                <div class="profile-stats">
                    <div class="stat-box">
                        <i class="fas fa-star"></i>
                        <div class="stat-value" id="profileTotalPoints">0</div>
                        <div class="stat-label">Points</div>
                    </div>
                    <div class="stat-box">
                        <i class="fas fa-check-circle"></i>
                        <div class="stat-value" id="profileCompletedChallenges">0</div>
                        <div class="stat-label">Challenges</div>
                    </div>
                </div>
            </div>
            <button onclick="logout()" class="btn-secondary btn-full">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </div>

    <!-- Create Group Modal -->
    <div id="createGroupModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-users"></i> Create New Group</h3>
            <div class="input-group">
                <i class="fas fa-tag"></i>
                <input type="text" id="newGroupName" placeholder="Group name">
            </div>
            <div class="input-group">
                <i class="fas fa-align-left"></i>
                <textarea id="newGroupDescription" placeholder="Group description"></textarea>
            </div>
            <div class="modal-actions">
                <button onclick="createGroup()" class="btn-primary">
                    <i class="fas fa-check"></i> Create
                </button>
                <button onclick="closeCreateGroupModal()" class="btn-secondary">
                    <i class="fas fa-times"></i> Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Challenge Completion Modal -->
    <div id="challengeModal" class="modal">
        <div class="modal-content">
            <h3 id="challengeTitle"></h3>
            <p id="challengeDescription"></p>
            <p class="challenge-points">
                <i class="fas fa-star"></i>
                Points: <span id="challengePoints"></span>
            </p>

            <div id="photoUpload" style="display:none;">
                <label><i class="fas fa-camera"></i> Upload photo:</label>
                <input type="file" id="photoInput" accept="image/*">
            </div>

            <div id="qrScan" style="display:none;">
                <button class="btn-secondary">
                    <i class="fas fa-qrcode"></i> Scan QR code
                </button>
            </div>

            <div id="userConfirm" style="display:none;">
                <div class="input-group">
                    <i class="fas fa-user"></i>
                    <input type="text" placeholder="Person's username">
                </div>
            </div>

            <div class="modal-actions">
                <button onclick="completeChallenge()" class="btn-primary">
                    <i class="fas fa-check-circle"></i> Complete Challenge
                </button>
                <button onclick="closeChallengeModal()" class="btn-secondary">
                    <i class="fas fa-times"></i> Close
                </button>
            </div>
        </div>
    </div>

    <!-- Invite Friends Modal -->
    <div id="inviteFriendsModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-user-plus"></i> Invite Friends to Group</h3>
            <div id="friendsToInviteList" class="friends-list"></div>
            <div class="modal-actions">
                <button onclick="closeInviteFriendsModal()" class="btn-secondary">
                    <i class="fas fa-times"></i> Close
                </button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="sl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#667eea">
    <title>ClubQuest - No캜ni Izzivi</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="screen active">
        <div class="container">
            <div class="login-box">
                <div class="logo-container">
                    <i class="fas fa-champagne-glasses logo-icon"></i>
                    <h1>ClubQuest</h1>
                </div>
                <p class="tagline">Spremeni no캜 v pustolov코캜ino</p>
                <div class="login-form">
                    <div class="input-group">
                        <i class="fas fa-user"></i>
                        <input type="text" id="usernameInput" placeholder="Uporabni코ko ime">
                    </div>
                    <button onclick="login()" class="btn-primary">
                        <i class="fas fa-sign-in-alt"></i> Vstopi
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Menu -->
    <div id="mainMenu" class="screen">
        <div class="header">
            <div class="header-brand">
                <i class="fas fa-champagne-glasses"></i>
                <h2>ClubQuest</h2>
            </div>
            <div class="user-info">
                <span id="currentUser" class="username-display">
                    <i class="fas fa-user-circle"></i>
                    <span id="usernameText"></span>
                </span>
                <button onclick="showScreen('profileScreen')" class="btn-icon">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
        </div>
        <div class="container">
            <div class="welcome-banner">
                <h3>Dobrodo코li nazaj! 游녦</h3>
                <p>Izberite mo쬹ost za za캜etek</p>
            </div>
            <div class="menu-grid">
                <div class="menu-card" onclick="showScreen('sessionScreen')">
                    <div class="icon-wrapper purple">
                        <i class="fas fa-bullseye fa-3x"></i>
                    </div>
                    <h3>Pridru쬴 se ve캜eru</h3>
                    <p>Vstopi v aktivno sejo in za캜ni z izzivi</p>
                    <div class="card-footer">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                </div>
                <div class="menu-card" onclick="showScreen('groupsScreen')">
                    <div class="icon-wrapper blue">
                        <i class="fas fa-users fa-3x"></i>
                    </div>
                    <h3>Skupine</h3>
                    <p>Ustvari ali se pridru쬴 skupini</p>
                    <div class="card-footer">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                </div>
                <div class="menu-card" onclick="showScreen('friendsScreen')">
                    <div class="icon-wrapper green">
                        <i class="fas fa-user-friends fa-3x"></i>
                    </div>
                    <h3>Prijatelji</h3>
                    <p>Upravljaj s prijatelji in vabili</p>
                    <div class="card-footer">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                </div>
                <div class="menu-card" onclick="showScreen('leaderboardScreen')">
                    <div class="icon-wrapper gold">
                        <i class="fas fa-trophy fa-3x"></i>
                    </div>
                    <h3>Lestvica</h3>
                    <p>Preveri najbolj코e igralce</p>
                    <div class="card-footer">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Session Screen -->
    <div id="sessionScreen" class="screen">
        <div class="header">
            <button onclick="showScreen('mainMenu')" class="btn-back">
                <i class="fas fa-arrow-left"></i> Nazaj
            </button>
            <h2><i class="fas fa-calendar-alt"></i> Aktivne seje</h2>
        </div>
        <div class="container">
            <div id="sessionsList" class="sessions-list"></div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="screen">
        <div class="header">
            <button onclick="showScreen('sessionScreen')" class="btn-back">
                <i class="fas fa-times"></i> Zapusti
            </button>
            <h2 id="sessionName"></h2>
            <div class="points">
                <i class="fas fa-star"></i>
                <span id="userPoints">0</span>
            </div>
        </div>
        <div class="container">
            <div class="tabs">
                <button class="tab active" onclick="switchTab('challenges')">
                    <i class="fas fa-tasks"></i> Izzivi
                </button>
                <button class="tab" onclick="switchTab('live-leaderboard')">
                    <i class="fas fa-trophy"></i> Lestvica
                </button>
            </div>

            <div id="challengesTab" class="tab-content active">
                <div class="section-header">
                    <h3><i class="fas fa-clipboard-list"></i> Tvoji izzivi</h3>
                </div>
                <div id="challengesList" class="challenges-list"></div>
            </div>

            <div id="liveLeaderboardTab" class="tab-content">
                <div class="section-header">
                    <h3><i class="fas fa-medal"></i> Trenutna lestvica</h3>
                </div>
                <div id="liveLeaderboard" class="leaderboard"></div>
            </div>
        </div>
    </div>

    <!-- Groups Screen -->
    <div id="groupsScreen" class="screen">
        <div class="header">
            <button onclick="showScreen('mainMenu')" class="btn-back">
                <i class="fas fa-arrow-left"></i> Nazaj
            </button>
            <h2><i class="fas fa-users"></i> Skupine</h2>
        </div>
        <div class="container">
            <div class="tabs">
                <button class="tab active" onclick="switchGroupTab('my-groups')">
                    <i class="fas fa-user-shield"></i> Moje skupine
                </button>
                <button class="tab" onclick="switchGroupTab('search-groups')">
                    <i class="fas fa-search"></i> I코캜i
                </button>
                <button class="tab" onclick="switchGroupTab('requests')">
                    <i class="fas fa-inbox"></i> Pro코nje
                </button>
            </div>

            <div id="myGroupsTab" class="tab-content active">
                <button onclick="showCreateGroupModal()" class="btn-primary btn-full">
                    <i class="fas fa-plus-circle"></i> Ustvari novo skupino
                </button>
                <div id="myGroupsList" class="groups-list"></div>
            </div>

            <div id="searchGroupsTab" class="tab-content">
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="groupSearchInput" placeholder="I코캜i skupine...">
                    <button onclick="searchGroups()" class="btn-primary">
                        <i class="fas fa-search"></i> I코캜i
                    </button>
                </div>
                <div id="searchResults" class="groups-list"></div>
            </div>

            <div id="requestsTab" class="tab-content">
                <div class="section-header">
                    <h3><i class="fas fa-bell"></i> Pro코nje za pridru쬴tev</h3>
                </div>
                <div id="groupRequestsList" class="requests-list"></div>
            </div>
        </div>
    </div>

    <!-- Group Detail Screen -->
    <div id="groupDetailScreen" class="screen">
        <div class="header">
            <button onclick="showScreen('groupsScreen')" class="btn-back">
                <i class="fas fa-arrow-left"></i> Nazaj
            </button>
            <h2 id="groupDetailName"></h2>
        </div>
        <div class="container">
            <div class="group-info">
                <div class="info-row">
                    <i class="fas fa-crown"></i>
                    <strong>Lastnik:</strong> <span id="groupOwner"></span>
                </div>
                <div class="info-row">
                    <i class="fas fa-users"></i>
                    <strong>캛lanov:</strong> <span id="groupMemberCount"></span>
                </div>
                <div class="info-row">
                    <i class="fas fa-align-left"></i>
                    <strong>Opis:</strong> <span id="groupDescription"></span>
                </div>
            </div>

            <div class="section-header">
                <h3><i class="fas fa-user-friends"></i> 캛lani skupine</h3>
            </div>
            <div id="groupMembersList" class="members-list"></div>

            <div id="groupAdminActions" class="admin-actions" style="display:none;">
                <h3><i class="fas fa-tools"></i> Akcije lastnika</h3>
                <button onclick="inviteFriendsToGroup()" class="btn-secondary">
                    <i class="fas fa-user-plus"></i> Povabi prijatelje
                </button>
            </div>
        </div>
    </div>

    <!-- Friends Screen -->
    <div id="friendsScreen" class="screen">
        <div class="header">
            <button onclick="showScreen('mainMenu')" class="btn-back">
                <i class="fas fa-arrow-left"></i> Nazaj
            </button>
            <h2><i class="fas fa-user-friends"></i> Prijatelji</h2>
        </div>
        <div class="container">
            <div class="tabs">
                <button class="tab active" onclick="switchFriendTab('friends-list')">
                    <i class="fas fa-heart"></i> Prijatelji
                </button>
                <button class="tab" onclick="switchFriendTab('friend-requests')">
                    <i class="fas fa-inbox"></i> Pro코nje
                </button>
                <button class="tab" onclick="switchFriendTab('find-friends')">
                    <i class="fas fa-search"></i> Najdi
                </button>
            </div>

            <div id="friendsListTab" class="tab-content active">
                <div id="friendsList" class="friends-list"></div>
            </div>

            <div id="friendRequestsTab" class="tab-content">
                <div class="section-header">
                    <h3><i class="fas fa-envelope"></i> Prejete pro코nje</h3>
                </div>
                <div id="friendRequestsList" class="requests-list"></div>
                <div class="section-header">
                    <h3><i class="fas fa-paper-plane"></i> Poslane pro코nje</h3>
                </div>
                <div id="sentRequestsList" class="requests-list"></div>
            </div>

            <div id="findFriendsTab" class="tab-content">
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="friendSearchInput" placeholder="I코캜i uporabnike...">
                    <button onclick="searchUsers()" class="btn-primary">
                        <i class="fas fa-search"></i> I코캜i
                    </button>
                </div>
                <div id="userSearchResults" class="users-list"></div>
            </div>
        </div>
    </div>

    <!-- Leaderboard Screen -->
    <div id="leaderboardScreen" class="screen">
        <div class="header">
            <button onclick="showScreen('mainMenu')" class="btn-back">
                <i class="fas fa-arrow-left"></i> Nazaj
            </button>
            <h2><i class="fas fa-trophy"></i> Lestvica najbolj코ih</h2>
        </div>
        <div class="container">
            <div class="section-header">
                <h3><i class="fas fa-medal"></i> Globalna lestvica</h3>
            </div>
            <div id="globalLeaderboard" class="leaderboard"></div>
        </div>
    </div>

    <!-- Profile Screen -->
    <div id="profileScreen" class="screen">
        <div class="header">
            <button onclick="showScreen('mainMenu')" class="btn-back">
                <i class="fas fa-arrow-left"></i> Nazaj
            </button>
            <h2><i class="fas fa-user"></i> Profil</h2>
        </div>
        <div class="container">
            <div class="profile-info">
                <div class="profile-avatar">
                    <i class="fas fa-user-circle"></i>
                </div>
                <h3 id="profileUsername"></h3>
                <div class="profile-stats">
                    <div class="stat-box">
                        <i class="fas fa-star"></i>
                        <div class="stat-value" id="profileTotalPoints">0</div>
                        <div class="stat-label">To캜ke</div>
                    </div>
                    <div class="stat-box">
                        <i class="fas fa-check-circle"></i>
                        <div class="stat-value" id="profileCompletedChallenges">0</div>
                        <div class="stat-label">Izzivi</div>
                    </div>
                </div>
            </div>
            <button onclick="logout()" class="btn-secondary btn-full">
                <i class="fas fa-sign-out-alt"></i> Odjava
            </button>
        </div>
    </div>

    <!-- Create Group Modal -->
    <div id="createGroupModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-users"></i> Ustvari novo skupino</h3>
            <div class="input-group">
                <i class="fas fa-tag"></i>
                <input type="text" id="newGroupName" placeholder="Ime skupine">
            </div>
            <div class="input-group">
                <i class="fas fa-align-left"></i>
                <textarea id="newGroupDescription" placeholder="Opis skupine"></textarea>
            </div>
            <div class="modal-actions">
                <button onclick="createGroup()" class="btn-primary">
                    <i class="fas fa-check"></i> Ustvari
                </button>
                <button onclick="closeCreateGroupModal()" class="btn-secondary">
                    <i class="fas fa-times"></i> Prekli캜i
                </button>
            </div>
        </div>
    </div>

    <!-- Challenge Completion Modal -->
    <div id="challengeModal" class="modal">
        <div class="modal-content">
            <h3 id="challengeTitle"></h3>
            <p id="challengeDescription"></p>
            <p class="challenge-points">
                <i class="fas fa-star"></i>
                To캜ke: <span id="challengePoints"></span>
            </p>

            <div id="photoUpload" style="display:none;">
                <label><i class="fas fa-camera"></i> Nalo쬴 fotografijo:</label>
                <input type="file" id="photoInput" accept="image/*">
            </div>

            <div id="qrScan" style="display:none;">
                <button class="btn-secondary">
                    <i class="fas fa-qrcode"></i> Skeniraj QR kodo
                </button>
            </div>

            <div id="userConfirm" style="display:none;">
                <div class="input-group">
                    <i class="fas fa-user"></i>
                    <input type="text" placeholder="Uporabni코ko ime osebe">
                </div>
            </div>

            <div class="modal-actions">
                <button onclick="completeChallenge()" class="btn-primary">
                    <i class="fas fa-check-circle"></i> Dokon캜i izziv
                </button>
                <button onclick="closeChallengeModal()" class="btn-secondary">
                    <i class="fas fa-times"></i> Zapri
                </button>
            </div>
        </div>
    </div>

    <!-- Invite Friends Modal -->
    <div id="inviteFriendsModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-user-plus"></i> Povabi prijatelje v skupino</h3>
            <div id="friendsToInviteList" class="friends-list"></div>
            <div class="modal-actions">
                <button onclick="closeInviteFriendsModal()" class="btn-secondary">
                    <i class="fas fa-times"></i> Zapri
                </button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
